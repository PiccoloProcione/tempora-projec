"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ConfigurationController=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var __awaiter=void 0&&(void 0).__awaiter||function(e,o,r,s){function u(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r||(r=Promise))(function(t,r){function n(e){try{i(s.next(e))}catch(e){r(e)}}function a(e){try{i(s["throw"](e))}catch(e){r(e)}}function i(e){e.done?t(e.value):u(e.value).then(n,a)}i((s=s.apply(e,o||[])).next())})};var ConfigurationController=function(){function i(e){(0,_classCallCheck2.default)(this,i);this.esClient=e}(0,_createClass2.default)(i,[{key:"handleGetConfiguration",value:function e(n,a){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var r;return _regenerator.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.esClient.getConfiguration(n.getAuthorizationHeaders());case 2:r=t.sent;i.writeEsResponse(a,r);case 4:case"end":return t.stop()}}},e,this)}))}},{key:"handleGetConfigurationFile",value:function e(n,a){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var r;return _regenerator.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.esClient.getConfigurationFile(n.getAuthorizationHeaders());case 2:r=t.sent;i.writeEsResponse(a,r);case 4:case"end":return t.stop()}}},e,this)}))}},{key:"handlePostConfiguration",value:function e(n,a){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var r;return _regenerator.default.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r={status:403,statusMessage:"forbidden",body:"You need a ReadonlyREST Enterprise license to use cluster-wide settings"};t.next=3;return this.esClient.postConfiguration(n.getAuthorizationHeaders(),n.getBody());case 3:r=t.sent;i.writeEsResponse(a,r);case 5:case"end":return t.stop()}}},e,this)}))}}],[{key:"writeEsResponse",value:function e(t,r){t.statusCode=r.status;t.statusMessage=r.statusMessage;t.send(r.body)}}]);return i}();exports.ConfigurationController=ConfigurationController;