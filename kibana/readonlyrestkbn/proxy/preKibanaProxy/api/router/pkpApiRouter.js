"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.buildPkpApiRouter=buildPkpApiRouter;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var express=_interopRequireWildcard(require("express"));var _identityController=require("../controller/identityController");var _settingsRouter=require("./settingsRouter");var _infoController=require("../controller/infoController");var _kibanaAppRegistryController=require("../controller/kibanaAppRegistryController");var __awaiter=void 0&&(void 0).__awaiter||function(e,u,t,a){function l(r){return r instanceof t?r:new t(function(e){e(r)})}return new(t||(t=Promise))(function(r,t){function n(e){try{o(a.next(e))}catch(e){t(e)}}function i(e){try{o(a["throw"](e))}catch(e){t(e)}}function o(e){e.done?r(e.value):l(e.value).then(n,i)}o((a=a.apply(e,u||[])).next())})};function buildPkpApiRouter(e){var r=this;var t=express.Router();var i=new _identityController.IdentityController;var o=new _infoController.InfoController;var u=new _kibanaAppRegistryController.KibanaAppRegistryController;t.get("/identity",function(t,n){return __awaiter(r,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function e(r){while(1){switch(r.prev=r.next){case 0:r.next=2;return i.handleGet(t.rorRequest,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}},e)}))});t.get('/info',function(t,n){return __awaiter(r,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function e(r){while(1){switch(r.prev=r.next){case 0:return r.abrupt("return",o.handleGet(t.rorRequest,n));case 1:case"end":return r.stop()}}},e)}))});t.use('/kbn_app_registry',function(t,n){return __awaiter(r,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function e(r){while(1){switch(r.prev=r.next){case 0:return r.abrupt("return",u.handlePost(t,n));case 1:case"end":return r.stop()}}},e)}))});t.use("/settings",(0,_settingsRouter.buildSettingsRouter)(e));return t}