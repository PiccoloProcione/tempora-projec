"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ROUserTransformer=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _index=require("../index");var _accessLevel=require("../../../../core/common/accessLevel");var NON_RO_OP_MATCHER=new RegExp('.*create.*|.*write.*|.*save.*|.*edit.*|.*delete.*|.*update.*|.*manage.*|.*copy.*|shareIntoSpace|.*crud.*',"i");var MANAGEMENT_WHITELIST=new RegExp('indexPatterns|objects|reporting');var ROUserTransformer=function(){function e(){(0,_classCallCheck2.default)(this,e)}(0,_createClass2.default)(e,null,[{key:"transform",value:function e(r,a){if(_accessLevel.AccessLevel.RO!==a.kibanaAccess&&_accessLevel.AccessLevel.RO_STRICT!==a.kibanaAccess){return r}for(var t in r){if(t==='catalogue'||t==='navLinks'||t==='management'){continue}(0,_index.mutateAllCapabilitiesInObject)(r[t],function(e){return!NON_RO_OP_MATCHER.test(e)})}var n=r['management'];for(var s in n){(0,_index.mutateAllCapabilitiesInObject)(n[s],function(e){return MANAGEMENT_WHITELIST.test(e)})}(0,_index.overridePropertiesByJsonPath)(r,['catalogue.advanced_settings','fileUpload.show','navLinks.ingestManager'],function(){return false});return r}}]);return e}();exports.ROUserTransformer=ROUserTransformer;